<!DOCTYPE html>
<html>

<head>
	<title>File Transfer</title>
	<link rel="manifest" href="./static/manifest.json" />
	<link rel="shortcut icon" href="./static/img/favicon.png" type="image/x-icon">
	<link rel="stylesheet" type="text/css" href="./static/css/style.css" />
	<link rel="stylesheet" href="./static/css/bootstrap.min.css">
</head>

<body class="row-12 ">
	<header>
		<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
			<a class="navbar-brand m-2" href="#">File Transfer</a>
			<div class="collapse navbar-collapse" id="navbarSupportedContent">
				<ul class="navbar-nav mr-auto">
					<li class="nav-item active">
						<a class="nav-link" href="#">Home </a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="#">File Upload</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="#">History</a>
					</li>
				</ul>
			</div>
		</nav>
	</header>
	<div id="alerts" class="container mt-3">
	</div>
	<form class="container mt-3">
		<h1>Upload New Files</h1>
		<div class="row">
			<input class="form-control mb-1" type="FILE" name="files[]" multiple id="files" />
		</div>
		<div class="row mt-3">
			<select class="form-control" name="category" id="category">
				{% for i in dirlist %}
				<option value="{{i}}">
					{{i}}
				</option>
				{% endfor %}
			</select>
		</div>
	</form>
	<div class="container mt-2">
		<div class="progress mt-2">
			<div id="progress" class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0"
				aria-valuemax="100" style="width: 0%;"></div>
		</div>
		<div class="row mt-3">
			<button class="btn btn-success " id="submit" onclick="upload()">Upload</button>
		</div>
	</div>
	<ul class="container mt-5">
		<h1>History Files <form action="/create">
				<input class="form-control" type="text" name="name" />
				<input class="btn btn-primary " type="SUBMIT" value="Create New Category" />
			</form>
		</h1>
		<br />

		{% for i in filesData %}
		{% for names in i.items() %}
		<br />
		<br />
		<a target="_blank" href="./download/{{names[0]}}">
			<h2 class="btn btn-info">{{names[0]}} (Click To Download All)</h2>
			<a class="btn btn-danger btn-sm" href="./delete/{{names[0]}}">Delete Category</a>
		</a>
		{% for file in names[1] %}
		<li class="m-2 ">
			&nbsp;
			&nbsp;
			&nbsp;
			&nbsp;
			&nbsp;
			<a class="btn btn-light" href="./download/{{names[0]}}/{{file}}" target="_blank">{{file}}</a>
			<a class="btn btn-danger btn-sm" href="./delete/{{names[0]}}/{{file}}">Delete File</a>
		</li>
		{% endfor %}
		{% endfor %}
		{% endfor %}
	</ul>

	<span class="d-flex justify-content-center w-100 mt-2">
		<a target="_blank" class="text-secondary " href="https://mohsenpoureiny.info/">
			Mohsen Poureiny </a> 
			&nbsp;
			{{version}}
	</span>
	<script src="./static/js/axios.min.js"></script>
	<script src="./static/js/jquery-3.6.0.min.js"></script>
	<script src="./static/js/bootstrap.bundle.min.js"></script>
	<script src="./static/js/index.js"></script>
</body>

</html>